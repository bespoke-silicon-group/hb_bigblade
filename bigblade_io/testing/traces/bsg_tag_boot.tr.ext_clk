# PRO-TIP: Set editior syntax to bash (or sh)

################################################################################
# DESIGN SPECIFIC TAG INFO
#
# ASIC TAG INFO
#
# Number | Description            | Width
# -------+------------------------+-------
#     0  | Clkgen Async Reset     | 1-bit
#   3-1  | Clkgen Oscillator      | 5-bits
#   6-4  | Clkgen Osc Trigger     | 1-bit
#   9-7  | Clkgen Downsampoler    | 7-bits
# 12-10  | Clkgen Clock Select    | 2-bits
#    13  | Prev Link IO Control   | 3-bits
#    14  | Prev Link CORE Control | 2-bits
#    15  | Prev CT CORE Control   | 2-bits
#    16  | Next Link IO Control   | 3-bits
#    17  | Next Link CORE Control | 2-bits
#    18  | Next CT CORE Control   | 2-bits
#    19  | Manycore Control       | 5-bits
#    20  | Vcache Control         |10-bits
#    21  | Network_a Control      | 5-bits
# 22- ?* | Network_b control      |10-bits
# ? -33  | Unused                 | N/A
#
#
# GATEWAY TAG INFO
#
# Number | Description            | Width
# -------+------------------------+-------
#    13  | Prev Link IO Control   | 3-bits
#    14  | Prev Link CORE Control | 2-bits
#    15  | Prev CT CORE Control   | 2-bits
#    16  | Next Link IO Control   | 3-bits
#    17  | Next Link CORE Control | 2-bits
#    18  | Next CT CORE Control   | 2-bits
#    19  | IC0 Manycore Control   | 5-bits
#    20  | IC0 Vcache Control     |10-bits
#    21  | IC0 Network_a Control  | 5-bits
#    22  | IC0 Network_b control  |10-bits
#    23  | IC1 Manycore Control   | 5-bits
#    24  | IC1 Vcache Control     |10-bits
#    25  | IC1 Network_a Control  | 5-bits
#    26  | IC1 Network_b control  |10-bits
# 27-33  | Unused                 | N/A
#
# *:  Depends on number of Vcache on ASIC (?=22+num_cache-1)
#
# Number of masters = 3
# Number of clients = 34
# Max data width    = 10
#
# Packet lengths
# <4b>___<3b>___<6b>_1b_<4b>___<10b>
# <4b>___<24b>
#
# There are 3 masters (GW, IC0 and IC1) but they are replicated systems. The lsb of
# the masterEn is the GW and high bits are IC0/IC1. Wormhole ID is growing from GW 
# to IC1, so GW is on prev_link side and IC1 is on next_link side.
#

################################################################################
# Tag Trace Replay Packet Format
#
# M = number of masters
# N = max(1, clog2(#_of_tag_clients))
# D = max(client_1_width, client_2_width, ..., client_n_width)
# L = clog2(D+1)
#
# |<    4-bits    >|< M-bits >|< N-bits >|<     1-bit    >|< L-bits >|< D-bits >|
# +----------------+----------+----------+----------------+----------+----------+
# | replay command | masterEn |  nodeID  | data_not_reset |  length  |   data   |
# +----------------+----------+----------+----------------+----------+----------+
#
# Replay Commands
#   0 = 0000 = Wait a cycle
#   1 = 0001 = Send data
#   2 = 0010 = Receive data
#   3 = 0011 = Assert done_o ouput signal
#   4 = 0100 = End test (calls $finish)
#   5 = 0101 = Wait for cycle_counter == 0
#   6 = 0110 = Initialize cycle_counter with a 16 bit number

################################################################################
#
# RESET BSG TAG MASTER
#
# First, we must reset the bsg_tag_master. To do this, we send a 1, then we
# send a bunch of 0's! By a bunch, the exact amount is (2^clog2(N+1+L+D))+1

# Send a full 0 packet to all masters
0001___11___00000000_0_0000___0000000000

# Wait ~32 cycles
0110___0000000000000000000100000
0101___0000000000000000000000000

################################################################################
#  ___  ___   ___ _____ ___ _____ ___    _   ___    ___ _    _  _____ ___ _  _
# | _ )/ _ \ / _ \_   _/ __|_   _| _ \  /_\ | _ \  / __| |  | |/ / __| __| \| |
# | _ \ (_) | (_) || | \__ \ | | |   / / _ \|  _/ | (__| |__| ' < (_ | _|| .` |
# |___/\___/ \___/ |_| |___/ |_| |_|_\/_/ \_\_|    \___|____|_|\_\___|___|_|\_|
#
################################################################################

################################################################################
#
# RESET BSG TAG CLIENTS
#
# Next, we should reset each client node. To do this we send a packet
# that has all 1's for data, and has data_not_reset=0. The nodeID should
# be the ID of the client we are reseting, and length should be the
# corrent length of the packet. We should send this packet to each client.

#SEND  en   id=0  r l=1
0001___10___00000000_0_0001___0000000001
#SEND  en   id=1  r l=5
0001___10___00000001_0_0101___0000011111
#SEND  en   id=2  r l=5
0001___10___00000010_0_0101___0000011111
#SEND  en   id=3  r l=5
0001___10___00000011_0_0101___0000011111
#SEND  en   id=4  r l=1
0001___10___00000100_0_0001___0000000001
#SEND  en   id=5  r l=1
0001___10___00000101_0_0001___0000000001
#SEND  en   id=6  r l=1
0001___10___00000110_0_0001___0000000001
#SEND  en   id=7  r l=7
0001___10___00000111_0_0111___0001111111
#SEND  en   id=8  r l=7
0001___10___00001000_0_0111___0001111111
#SEND  en   id=9  r l=7
0001___10___00001001_0_0111___0001111111
#SEND  en   id=10 r l=2
0001___10___00001010_0_0010___0000000011
#SEND  en   id=11 r l=2
0001___10___00001011_0_0010___0000000011
#SEND  en   id=12 r l=2
0001___10___00001100_0_0010___0000000011

#SEND  en   id=13~16  r l=5
0001___10___00001101_0_0101___0000011111
0001___10___00001110_0_0101___0000011111
0001___10___00001111_0_0101___0000011111
0001___10___00010000_0_0101___0000011111
#SEND  en   id=17~20  r l=1
0001___10___00010001_0_0001___0000000001
0001___10___00010010_0_0001___0000000001
0001___10___00010011_0_0001___0000000001
0001___10___00010100_0_0001___0000000001
#SEND  en   id=21~24  r l=7
0001___10___00010101_0_0111___0001111111
0001___10___00010110_0_0111___0001111111
0001___10___00010111_0_0111___0001111111
0001___10___00011000_0_0111___0001111111
#SEND  en   id=25~28  r l=2
0001___10___00011001_0_0010___0000000011
0001___10___00011010_0_0010___0000000011
0001___10___00011011_0_0010___0000000011
0001___10___00011100_0_0010___0000000011

#SEND  en   id=37~52  r l=5
0001___10___00100101_0_0101___0000011111
0001___10___00100110_0_0101___0000011111
0001___10___00100111_0_0101___0000011111
0001___10___00101000_0_0101___0000011111
0001___10___00101001_0_0101___0000011111
0001___10___00101010_0_0101___0000011111
0001___10___00101011_0_0101___0000011111
0001___10___00101100_0_0101___0000011111
0001___10___00101101_0_0101___0000011111
0001___10___00101110_0_0101___0000011111
0001___10___00101111_0_0101___0000011111
0001___10___00110000_0_0101___0000011111
0001___10___00110001_0_0101___0000011111
0001___10___00110010_0_0101___0000011111
0001___10___00110011_0_0101___0000011111
0001___10___00110100_0_0101___0000011111
#SEND  en   id=53~68  r l=1
0001___10___00110101_0_0001___0000000001
0001___10___00110110_0_0001___0000000001
0001___10___00110111_0_0001___0000000001
0001___10___00111000_0_0001___0000000001
0001___10___00111001_0_0001___0000000001
0001___10___00111010_0_0001___0000000001
0001___10___00111011_0_0001___0000000001
0001___10___00111100_0_0001___0000000001
0001___10___00111101_0_0001___0000000001
0001___10___00111110_0_0001___0000000001
0001___10___00111111_0_0001___0000000001
0001___10___01000000_0_0001___0000000001
0001___10___01000001_0_0001___0000000001
0001___10___01000010_0_0001___0000000001
0001___10___01000011_0_0001___0000000001
0001___10___01000100_0_0001___0000000001
#SEND  en   id=69~84  r l=7
0001___10___01000101_0_0111___0001111111
0001___10___01000110_0_0111___0001111111
0001___10___01000111_0_0111___0001111111
0001___10___01001000_0_0111___0001111111
0001___10___01001001_0_0111___0001111111
0001___10___01001010_0_0111___0001111111
0001___10___01001011_0_0111___0001111111
0001___10___01001100_0_0111___0001111111
0001___10___01001101_0_0111___0001111111
0001___10___01001110_0_0111___0001111111
0001___10___01001111_0_0111___0001111111
0001___10___01010000_0_0111___0001111111
0001___10___01010001_0_0111___0001111111
0001___10___01010010_0_0111___0001111111
0001___10___01010011_0_0111___0001111111
0001___10___01010100_0_0111___0001111111
#SEND  en   id=85~100  r l=2
0001___10___01010101_0_0010___0000000011
0001___10___01010110_0_0010___0000000011
0001___10___01010111_0_0010___0000000011
0001___10___01011000_0_0010___0000000011
0001___10___01011001_0_0010___0000000011
0001___10___01011010_0_0010___0000000011
0001___10___01011011_0_0010___0000000011
0001___10___01011100_0_0010___0000000011
0001___10___01011101_0_0010___0000000011
0001___10___01011110_0_0010___0000000011
0001___10___01011111_0_0010___0000000011
0001___10___01100000_0_0010___0000000011
0001___10___01100001_0_0010___0000000011
0001___10___01100010_0_0010___0000000011
0001___10___01100011_0_0010___0000000011
0001___10___01100100_0_0010___0000000011

################################################################################
#
# START CONFIGURATION
#
# The bsg tag network is now live! We can begin our configuration.

#   ### Set osc triggers low
#   
#   #SEND  en   id=4  d l=1   {trigger}
#   0001___10___00000100_1_0001___0000000000
#   #SEND  en   id=5  d l=1   {trigger}
#   0001___10___00000101_1_0001___0000000000
#   #SEND  en   id=6  d l=1   {trigger}
#   0001___10___00000110_1_0001___0000000000
#   
#   ### Program the raw oscillators speed
#   
#   #SEND  en   id=1  d l=5   {adt, cdt, fdt}
#   0001___10___00000001_1_0101___0000000000
#   #SEND  en   id=2  d l=5   {adt, cdt, fdt}
#   0001___10___00000010_1_0101___0000000000
#   #SEND  en   id=3  d l=5   {adt, cdt, fdt}
#   0001___10___00000011_1_0101___0000000000
#   
#   ### Trigger oscillators
#   
#   #SEND  en   id=4  d l=1   {trigger}
#   0001___10___00000100_1_0001___0000000001
#   0001___10___00000100_1_0001___0000000000
#   #SEND  en   id=5  d l=1   {trigger}
#   0001___10___00000101_1_0001___0000000001
#   0001___10___00000101_1_0001___0000000000
#   #SEND  en   id=6  d l=1   {trigger}
#   0001___10___00000110_1_0001___0000000001
#   0001___10___00000110_1_0001___0000000000
#   
#   ### Async clk-gen reset to get things moving
#   
#   #SEND  en   id=0  d l=1   {async_reset}
#   0001___10___00000000_1_0001___0000000000
#   0001___10___00000000_1_0001___0000000001
#   0001___10___00000000_1_0001___0000000000
#   
#   ### Set downsamples and reset
#   
#   #SEND  en   id=7 d l=7   {ds_val, reset}
#   0001___10___00000111_1_0111___0000000001
#   0001___10___00000111_1_0111___0000000000
#   #SEND  en   id=8  d l=7   {ds_val, reset}
#   0001___10___00001000_1_0111___0000000001
#   0001___10___00001000_1_0111___0000000000
#   #SEND  en   id=9  d l=7   {ds_val, reset}
#   0001___10___00001001_1_0111___0000000001
#   0001___10___00001001_1_0111___0000000000
#   
#   ### Select the output clock (0=raw osc, 1=ds osc, 2=ext, 3=off)
#   
#   #SEND  en   id=10 d l=2   {clk_select}
#   0001___10___00001010_1_0010___0000000001
#   #SEND  en   id=11 d l=2   {clk_select}
#   0001___10___00001011_1_0010___0000000001
#   #SEND  en   id=12 d l=2   {clk_select}
#   0001___10___00001100_1_0010___0000000001

#SEND  en   id=10 d l=2   {clk_select}
0001___10___00001010_1_0010___0000000010
#SEND  en   id=11 d l=2   {clk_select}
0001___10___00001011_1_0010___0000000010
#SEND  en   id=12 d l=2   {clk_select}
0001___10___00001100_1_0010___0000000010

#SEND  en   id=25~28 d l=2   {clk_select}
0001___10___00011001_1_0010___0000000010
0001___10___00011010_1_0010___0000000010
0001___10___00011011_1_0010___0000000010
0001___10___00011100_1_0010___0000000010

#SEND  en   id=85~100 d l=2   {clk_select}
0001___10___01010101_1_0010___0000000010
0001___10___01010110_1_0010___0000000010
0001___10___01010111_1_0010___0000000010
0001___10___01011000_1_0010___0000000010
0001___10___01011001_1_0010___0000000010
0001___10___01011010_1_0010___0000000010
0001___10___01011011_1_0010___0000000010
0001___10___01011100_1_0010___0000000010
0001___10___01011101_1_0010___0000000010
0001___10___01011110_1_0010___0000000010
0001___10___01011111_1_0010___0000000010
0001___10___01100000_1_0010___0000000010
0001___10___01100001_1_0010___0000000010
0001___10___01100010_1_0010___0000000010
0001___10___01100011_1_0010___0000000010
0001___10___01100100_1_0010___0000000010

################################################################################
#  ___  ___   ___ _____ ___ _____ ___    _   ___   ___ ___     ___ ___  __  __ ___ _    _____  __
# | _ )/ _ \ / _ \_   _/ __|_   _| _ \  /_\ | _ \ |_ _/ _ \   / __/ _ \|  \/  | _ \ |  | __\ \/ /
# | _ \ (_) | (_) || | \__ \ | | |   / / _ \|  _/  | | (_) | | (_| (_) | |\/| |  _/ |__| _| >  <
# |___/\___/ \___/ |_| |___/ |_| |_|_\/_/ \_\_|   |___\___/   \___\___/|_|  |_|_| |____|___/_/\_\
#
################################################################################

################################################################################
#
# RESET BSG TAG CLIENTS
#
# Next, we should reset each client node. To do this we send a packet
# that has all 1's for data, and has data_not_reset=0. The nodeID should
# be the ID of the client we are reseting, and length should be the
# corrent length of the packet. We should send this packet to each client.

#SEND  en   id=29~32 r l=3
0001___11___00011101_0_0011___0000000111
0001___11___00011110_0_0011___0000000111
0001___11___00011111_0_0011___0000000111
0001___11___00100000_0_0011___0000000111

#SEND  en   id=33~36 r l=4
0001___11___00100001_0_0100___0000001111
0001___11___00100010_0_0100___0000001111
0001___11___00100011_0_0100___0000001111
0001___11___00100100_0_0100___0000001111

#SEND  en   id=101~116 r l=3
0001___11___01100101_0_0011___0000000111
0001___11___01100110_0_0011___0000000111
0001___11___01100111_0_0011___0000000111
0001___11___01101000_0_0011___0000000111
0001___11___01101001_0_0011___0000000111
0001___11___01101010_0_0011___0000000111
0001___11___01101011_0_0011___0000000111
0001___11___01101100_0_0011___0000000111
0001___11___01101101_0_0011___0000000111
0001___11___01101110_0_0011___0000000111
0001___11___01101111_0_0011___0000000111
0001___11___01110000_0_0011___0000000111
0001___11___01110001_0_0011___0000000111
0001___11___01110010_0_0011___0000000111
0001___11___01110011_0_0011___0000000111
0001___11___01110100_0_0011___0000000111

#SEND  en   id=117~132 r l=4
0001___11___01110101_0_0100___0000001111
0001___11___01110110_0_0100___0000001111
0001___11___01110111_0_0100___0000001111
0001___11___01111000_0_0100___0000001111
0001___11___01111001_0_0100___0000001111
0001___11___01111010_0_0100___0000001111
0001___11___01111011_0_0100___0000001111
0001___11___01111100_0_0100___0000001111
0001___11___01111101_0_0100___0000001111
0001___11___01111110_0_0100___0000001111
0001___11___01111111_0_0100___0000001111
0001___11___10000000_0_0100___0000001111
0001___11___10000001_0_0100___0000001111
0001___11___10000010_0_0100___0000001111
0001___11___10000011_0_0100___0000001111
0001___11___10000100_0_0100___0000001111

#SEND  en   id=133 r l=2
0001___11___10000101_0_0010___0000000011

#SEND  en   id=134~135 r l=7
0001___11___10000110_0_0111___0001111111
0001___11___10000111_0_0111___0001111111

################################################################################
#
# START CONFIGURATION
#
# The bsg tag network is now live! We can begin our configuration.

### STEP 1: INITIALIZE EVERYTHING

# Reset IO links IO control
#SEND  en   id=29~32 d l=3   {up_link_reset, down_link_reset, async_token_reset}
0001___11___00011101_1_0011___0000000110
0001___11___00011110_1_0011___0000000110
0001___11___00011111_1_0011___0000000110
0001___11___00100000_1_0011___0000000110

# Reset IO links CORE control
#SEND  en   id=33~36 d l=4   {up_link_reset, down_link_reset, ct_reset, fifo_reset}
0001___11___00100001_1_0100___0000001111
0001___11___00100010_1_0100___0000001111
0001___11___00100011_1_0100___0000001111
0001___11___00100100_1_0100___0000001111

# Reset MEM links IO control
#SEND  en   id=101~116 d l=3   {up_link_reset, down_link_reset, async_token_reset}
0001___11___01100101_1_0011___0000000110
0001___11___01100110_1_0011___0000000110
0001___11___01100111_1_0011___0000000110
0001___11___01101000_1_0011___0000000110
0001___11___01101001_1_0011___0000000110
0001___11___01101010_1_0011___0000000110
0001___11___01101011_1_0011___0000000110
0001___11___01101100_1_0011___0000000110
0001___11___01101101_1_0011___0000000110
0001___11___01101110_1_0011___0000000110
0001___11___01101111_1_0011___0000000110
0001___11___01110000_1_0011___0000000110
0001___11___01110001_1_0011___0000000110
0001___11___01110010_1_0011___0000000110
0001___11___01110011_1_0011___0000000110
0001___11___01110100_1_0011___0000000110

# Reset MEM links CORE control
#SEND  en   id=117~132 d l=4   {up_link_reset, down_link_reset, ct_reset, fifo_reset}
0001___11___01110101_1_0100___0000001111
0001___11___01110110_1_0100___0000001111
0001___11___01110111_1_0100___0000001111
0001___11___01111000_1_0100___0000001111
0001___11___01111001_1_0100___0000001111
0001___11___01111010_1_0100___0000001111
0001___11___01111011_1_0100___0000001111
0001___11___01111100_1_0100___0000001111
0001___11___01111101_1_0100___0000001111
0001___11___01111110_1_0100___0000001111
0001___11___01111111_1_0100___0000001111
0001___11___10000000_1_0100___0000001111
0001___11___10000001_1_0100___0000001111
0001___11___10000010_1_0100___0000001111
0001___11___10000011_1_0100___0000001111
0001___11___10000100_1_0100___0000001111

# Reset ASIC HB
#SEND  en   id=133 d l=2   {padding, reset}
0001___10___10000101_1_0010___0000000001

# Reset GW HB
#SEND  en   id=133 d l=2   {padding, reset}
0001___01___10000101_1_0010___0000000001

# Set HB cords
#SEND  en   id=134~135 r l=7 {cord}
0001___11___10000110_0_0111___0000000000
0001___11___10000111_0_0111___0001000000

### STEP 2: Perform async token resets

# Async token reset for IO links
#SEND  en   id=29~32 d l=3   {up_link_reset, down_link_reset, async_token_reset}
0001___11___00011101_1_0011___0000000111
0001___11___00011110_1_0011___0000000111
0001___11___00011111_1_0011___0000000111
0001___11___00100000_1_0011___0000000111

0001___11___00011101_1_0011___0000000110
0001___11___00011110_1_0011___0000000110
0001___11___00011111_1_0011___0000000110
0001___11___00100000_1_0011___0000000110

# Async token reset for MEM links
#SEND  en   id=101~116 d l=3   {up_link_reset, down_link_reset, async_token_reset}
0001___11___01100101_1_0011___0000000111
0001___11___01100110_1_0011___0000000111
0001___11___01100111_1_0011___0000000111
0001___11___01101000_1_0011___0000000111
0001___11___01101001_1_0011___0000000111
0001___11___01101010_1_0011___0000000111
0001___11___01101011_1_0011___0000000111
0001___11___01101100_1_0011___0000000111
0001___11___01101101_1_0011___0000000111
0001___11___01101110_1_0011___0000000111
0001___11___01101111_1_0011___0000000111
0001___11___01110000_1_0011___0000000111
0001___11___01110001_1_0011___0000000111
0001___11___01110010_1_0011___0000000111
0001___11___01110011_1_0011___0000000111
0001___11___01110100_1_0011___0000000111

0001___11___01100101_1_0011___0000000110
0001___11___01100110_1_0011___0000000110
0001___11___01100111_1_0011___0000000110
0001___11___01101000_1_0011___0000000110
0001___11___01101001_1_0011___0000000110
0001___11___01101010_1_0011___0000000110
0001___11___01101011_1_0011___0000000110
0001___11___01101100_1_0011___0000000110
0001___11___01101101_1_0011___0000000110
0001___11___01101110_1_0011___0000000110
0001___11___01101111_1_0011___0000000110
0001___11___01110000_1_0011___0000000110
0001___11___01110001_1_0011___0000000110
0001___11___01110010_1_0011___0000000110
0001___11___01110011_1_0011___0000000110
0001___11___01110100_1_0011___0000000110

### STEP 3: De-assert Upstream IO reset

# De-assert upstream reset for IO links
#SEND  en   id=29~32 d l=3   {up_link_reset, down_link_reset, async_token_reset}
0001___11___00011101_1_0011___0000000010
0001___11___00011110_1_0011___0000000010
0001___11___00011111_1_0011___0000000010
0001___11___00100000_1_0011___0000000010

# De-assert upstream reset for MEM links
#SEND  en   id=101~116 d l=3   {up_link_reset, down_link_reset, async_token_reset}
0001___11___01100101_1_0011___0000000010
0001___11___01100110_1_0011___0000000010
0001___11___01100111_1_0011___0000000010
0001___11___01101000_1_0011___0000000010
0001___11___01101001_1_0011___0000000010
0001___11___01101010_1_0011___0000000010
0001___11___01101011_1_0011___0000000010
0001___11___01101100_1_0011___0000000010
0001___11___01101101_1_0011___0000000010
0001___11___01101110_1_0011___0000000010
0001___11___01101111_1_0011___0000000010
0001___11___01110000_1_0011___0000000010
0001___11___01110001_1_0011___0000000010
0001___11___01110010_1_0011___0000000010
0001___11___01110011_1_0011___0000000010
0001___11___01110100_1_0011___0000000010

### STEP 4: De-assert Downstream Links reset

# De-assert downstream reset for IO links
#SEND  en   id=29~32 d l=3   {up_link_reset, down_link_reset, async_token_reset}
0001___11___00011101_1_0011___0000000000
0001___11___00011110_1_0011___0000000000
0001___11___00011111_1_0011___0000000000
0001___11___00100000_1_0011___0000000000

# De-assert downstream reset for MEM links
#SEND  en   id=101~116 d l=3   {up_link_reset, down_link_reset, async_token_reset}
0001___11___01100101_1_0011___0000000000
0001___11___01100110_1_0011___0000000000
0001___11___01100111_1_0011___0000000000
0001___11___01101000_1_0011___0000000000
0001___11___01101001_1_0011___0000000000
0001___11___01101010_1_0011___0000000000
0001___11___01101011_1_0011___0000000000
0001___11___01101100_1_0011___0000000000
0001___11___01101101_1_0011___0000000000
0001___11___01101110_1_0011___0000000000
0001___11___01101111_1_0011___0000000000
0001___11___01110000_1_0011___0000000000
0001___11___01110001_1_0011___0000000000
0001___11___01110010_1_0011___0000000000
0001___11___01110011_1_0011___0000000000
0001___11___01110100_1_0011___0000000000

### STEP 5/6: De-assert Upstream/Downstream CORE reset

# De-assert upstream/downstream reset for IO links
#SEND  en   id=33~36 d l=4   {up_link_reset, down_link_reset, ct_reset, fifo_reset}
0001___11___00100001_1_0100___0000000011
0001___11___00100010_1_0100___0000000011
0001___11___00100011_1_0100___0000000011
0001___11___00100100_1_0100___0000000011

# De-assert upstream/downstream reset for MEM links
#SEND  en   id=117~132 d l=4   {up_link_reset, down_link_reset, ct_reset, fifo_reset}
0001___11___01110101_1_0100___0000000011
0001___11___01110110_1_0100___0000000011
0001___11___01110111_1_0100___0000000011
0001___11___01111000_1_0100___0000000011
0001___11___01111001_1_0100___0000000011
0001___11___01111010_1_0100___0000000011
0001___11___01111011_1_0100___0000000011
0001___11___01111100_1_0100___0000000011
0001___11___01111101_1_0100___0000000011
0001___11___01111110_1_0100___0000000011
0001___11___01111111_1_0100___0000000011
0001___11___10000000_1_0100___0000000011
0001___11___10000001_1_0100___0000000011
0001___11___10000010_1_0100___0000000011
0001___11___10000011_1_0100___0000000011
0001___11___10000100_1_0100___0000000011

### STEP 7: De-assert CT reset and fifo reset

# De-assert ct reset and fifo_reset for IO links
#SEND  en   id=33~36 d l=4   {up_link_reset, down_link_reset, ct_reset, fifo_reset}
0001___11___00100001_1_0100___0000000000
0001___11___00100010_1_0100___0000000000
0001___11___00100011_1_0100___0000000000
0001___11___00100100_1_0100___0000000000

# De-assert ct reset and fifo_reset for MEM links
#SEND  en   id=117~132 d l=4   {up_link_reset, down_link_reset, ct_reset, fifo_reset}
0001___11___01110101_1_0100___0000000000
0001___11___01110110_1_0100___0000000000
0001___11___01110111_1_0100___0000000000
0001___11___01111000_1_0100___0000000000
0001___11___01111001_1_0100___0000000000
0001___11___01111010_1_0100___0000000000
0001___11___01111011_1_0100___0000000000
0001___11___01111100_1_0100___0000000000
0001___11___01111101_1_0100___0000000000
0001___11___01111110_1_0100___0000000000
0001___11___01111111_1_0100___0000000000
0001___11___10000000_1_0100___0000000000
0001___11___10000001_1_0100___0000000000
0001___11___10000010_1_0100___0000000000
0001___11___10000011_1_0100___0000000000
0001___11___10000100_1_0100___0000000000

### STEP 8: De-assert HB reset

# De-assert reset for ASIC HB
#SEND  en   id=133 d l=2   {padding, reset}
0001___10___10000101_1_0010___0000000000

# De-assert reset for GW HB
#SEND  en   id=133 d l=2   {padding, reset}
0001___01___10000101_1_0010___0000000000

# Wait ~64 cycles for TAG traffic to propagate to destination
0110___0000000000000000001000000
0101___0000000000000000000000000

################################################################################
#
# Done!
#
# Configuration is complete and we are out of reset. We should indicate we are
# done to allow the next part of the testbench to come alive.

# Assert done_o
0011___0000000000000000000000000

